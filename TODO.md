# TODO

- [x]  Finish implementing code generation
- [x]  Fix return values not being included in the function body
- [x]  Convert function identifier to FuncId without extra state tracking
- [x]  Fix adding more than two arguments to main causing strange results
- [x]  Improve context/ir/disassembly API
- [x]  Support parsing a function with no return values
- [x]  Do not require an underscore assignment when calling a function with no return values
- [x]  Develop a `semantic` module that is only concerned with error checking
- [x]  Check that a standalone function call statement does not return values
- [x]  Check that a function's return statements are consistent
- [x]  Declare function signature when calling functions to allow for arbitrary function order
- [x]  Rename `expression_evaluator.rs` to be more in line with codegen
- [x]  Clean up semantic module code structure
- [x]  Remove any current error checking that the `semantic` module already covers
- [x]  Use a new `subject: body;` syntax to represent functions and statements that have scopes
- [x]  Pull out the entry point to the compiler to its own module
- [x]  Validate number of parameters = number of arguments in function calls, ensure this is not reported as a compiler bug
- [x]  Replace `MismatchedExpressionResultsError` with more specific error types
- [x]  Add a new variable type that contains the variable name and type information
- [x]  Rename `ast_parser` to just `parser`
- [x]  Add bool type to semantic analysis
- [x]  Add a `BlockVariables` type in codegen that replaces `Scope` for variable indexing.
- [x]  Add bool type to code generation
- [x]  Handle boolean comparison for multiple types
- [x]  Add source locations to each AST type
- [x]  Add [codespan-reporting](https://github.com/brendanzab/codespan) and set up one basic error message using source location
- [ ]  Make a macro to automate implementing a `Diagnostic` trait for easier error messaging
- [ ]  Update all error types to use codespan-reporting
- [ ]  Variables in `Statement::Assignment` should not be optional so that their `SourceRange` can still be utilized for `WrongNumberOfVariablesError`
- [ ]  Pattern matching
- [ ]  Check that all blocks in a function return the same number and type of values
- [ ]  Add syntactic sugar for pattern matching on a bool with only a true arm, akin to an if statement
- [ ]  Add range operator
- [ ]  Support tuples
- [ ]  Bool condition loop (while loop)
- [ ]  Range loop (for loop)
- [ ]  Support optionally getting the index and/or value when iterating over a range
- [ ]  Fix codegen error for empty function (should codegen ignore it, or semantic analysis catch it?)
- [ ]  Add unit tests for grammar parsing
- [ ]  Add unit tests for semantic errors
- [ ]  Handle comparison for more types (casting? comparison interface?)
- [ ]  Decide how mutability should be handled (allow reassigning to the same variable?)
- [ ]  Make `FunctionSignature` generic with fixed sized arrays
- [ ]  Take a second pass over doc comments, and add more where necessary
- [ ]  Support lambdas/nested functions (might need to add func keyword for this?)
- [ ]  Add scenario tests for testing each feature of the language
- [ ]  Decide how variable shadowing should be handled
- [ ]  Update crate name and all instances of TODO_LANG_NAME with the name of the language.
- [ ]  Implement imports to allow splitting up code across multiple source files
