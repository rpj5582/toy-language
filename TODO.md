# TODO

- [x]  Finish implementing code generation
- [x]  Fix return values not being included in the function body
- [x]  Convert function identifier to FuncId without extra state tracking
- [x]  Fix adding more than two arguments to main causing strange results
- [x]  Improve context/ir/disassembly API
- [x]  Support parsing a function with no return values
- [x]  Do not require an underscore assignment when calling a function with no return values
- [x]  Develop a `semantic` module that is only concerned with error checking
- [x]  Check that a standalone function call statement does not return values
- [x]  Check that a function's return statements are consistent
- [x]  Declare function signature when calling functions to allow for arbitrary function order
- [x]  Rename `expression_evaluator.rs` to be more in line with codegen
- [x]  Clean up semantic module code structure
- [x]  Remove any current error checking that the `semantic` module already covers
- [x]  Use a new `subject: body;` syntax to represent functions and statements that have scopes
- [x]  Pull out the entry point to the compiler to its own module
- [x]  Validate number of parameters = number of arguments in function calls, ensure this is not reported as a compiler bug
- [x]  Replace `MismatchedExpressionResultsError` with more specific error types
- [x]  Add a new variable type that contains the variable name and type information
- [x]  Rename `ast_parser` to just `parser`
- [x]  Add bool type to semantic analysis
- [x]  Add a `BlockVariables` type in codegen that replaces `Scope` for variable indexing.
- [x]  Add bool type to code generation
- [x]  Handle boolean comparison for multiple types
- [x]  Add source locations to each AST type
- [x]  Add [codespan-reporting](https://github.com/brendanzab/codespan) and set up one basic error message using source location
- [x]  Add a `source()` method to expressions and statements so that more source code can be pulled to support recommended fixes
- [x]  Variables in `Statement::Assignment` should not be optional so that their `SourceRange` can still be utilized for `WrongNumberOfVariablesError`
- [x]  `Diagnostic` should take an error instead of a `String` message
- [x]  Instead of generating `SourceRange`s in a `source()` method, statements and expressions should have their own parsed `SourceRange` fields that they return
- [x]  Remove `IntLiteral` and `BoolLiteral` types
- [x]  Add help/suggestions to diagnostics - use this for `NonZeroReturnError` to recommend adding a discarded variable
- [x]  Change `Variable`'s type field from `Option<DataType>` to `Option<Type>` to better support parameter conversion and sets up for future type annotation support
- [x]  Update all error types to use codespan-reporting
- [x]  Add a diagnostic error for using a discarded variable
- [x]  Add a diagnostic warning for unused variables
- [x]  Add a diagnostic warning for unused functions
- [x]  Add a `FunctionSignature` to `FunctionCall`, replacing `argument_types` and `return_types`
- [x]  Remove `FunctionParameter` in favor of `Variable`
- [x]  Allow explicit variable type annotations
- [x]  The last expression in a scope should be what the scope returns
- [x]  Add error for unreachable code
- [x]  Rename `Scope` -> `ScopeTracker`
- [x]  Change `Vec<Statement>` into `Scope`
- [x]  Remove statements as a concept, only allow expressions
- [x]  Add back a non zero return error
- [x]  Add necessary codegen for a scope return
- [x]  Add a scope as an `Expression` variant
- [x]  Add if expressions
- [x]  Refactor divergent returns, just call them function returns, no need to have function returns return their types to the outer expression/scope
- [x]  Support function returns within if expressions in codegen
- [x]  Check that both scopes in an if expression return the same number and type of values, except for function returns
- [x]  Change `split_return()` to use `split_last()` instead of `split_at()`, have `split_return()` return an Option
- [x]  Support floating point numbers
- [x]  Struct definitions
- [x]  Reduce a `DataType`'s struct data from a copy of the whole struct to just the struct member data types
- [x]  Fix a bug where functions with struct return types were not having their `DataType`'s struct data correctly populated
- [ ]  Allow for arbitrary struct definition order
- [ ]  Read source from a file instead of baking it in to the executable
- [ ]  Allow struct definitions in function/local scopes
- [ ]  Read or write to a struct field
- [ ]  Pass by reference
- [ ]  Pattern matching
- [ ]  Add range types that represent a continuous range of values
- [ ]  Add operator to check if int is in a range
- [ ]  Make a function an expression
- [ ]  Bool condition loop (while loop)
- [ ]  Range loop (for loop)
- [ ]  Support optionally getting the index and/or value when iterating over a range
- [ ]  Fix codegen error for empty function (should codegen ignore it, or semantic analysis catch it?)
- [ ]  Change semantic errors to not actually be Error types?
- [ ]  Add unit tests for grammar parsing
- [ ]  Add unit tests for semantic errors
- [ ]  Handle comparison for more types (casting? comparison interface?)
- [ ]  Decide how mutability should be handled (allow reassigning to the same variable?)
- [ ]  Look into ways to insert recommended code in diagnostic messages
- [ ]  Make `FunctionSignature` generic with fixed sized arrays
- [ ]  Take a second pass over doc comments, and add more where necessary
- [ ]  Support lambdas/nested functions (might need to add func keyword for this?)
- [ ]  Add scenario tests for testing each feature of the language
- [ ]  Decide how variable shadowing should be handled
- [ ]  Update crate name and all instances of TODO_LANG_NAME with the name of the language.
- [ ]  Implement imports to allow splitting up code across multiple source files
